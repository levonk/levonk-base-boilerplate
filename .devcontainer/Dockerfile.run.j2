{% if use_devcontainer %}
# Runtime image
# Note: Ideally this would be FROM a build image produced by Dockerfile.build; using base as placeholder.
FROM {{ agent_os_repository }}:{{ agent_os_tag }}

ARG USER={{ container_user }}
ARG GROUP={{ container_group }}
ARG UID={{ container_user_id }}
ARG GID={{ container_group_id }}

RUN groupadd -g ${GID} ${GROUP} \
    && useradd -m -s /bin/bash -u ${UID} -g ${GID} ${USER}

USER ${USER}
WORKDIR /home/${USER}/app

# Environment for mise (if used)
ENV PATH="/home/${USER}/.local/bin:${PATH}"

# Placeholder command; generated project may override
CMD ["/bin/bash", "/home/${USER}/app/scripts/setup_development.sh"]
{% endif %}
